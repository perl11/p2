{"version":1,"ops":[{"type":1,"author":{"id":"ba1625a6608e712ded2a67f4a8029f0ddc5b0159"},"timestamp":1361747704,"metadata":{"github-id":"MDU6SXNzdWUxMTM0MTkyMg==","github-url":"https://github.com/perl11/p2/issues/13","origin":"github"},"title":"stack-buffer-overflow at jump vm","message":"with clang and -fsanitize=address\n\n```\n./potion -V -B test/flow/break.pn\n[17] move     1 0       ; 0\n[18] loadpn   2 3       ; 1\n[19] add      1 2       ; 1\n[20] setlocal 1 0       ; 1\n[21] getlocal 1 0       ; 1\n[22] loadpn   2 21      ; 10\n[23] gte      1 2       ; false\n[24] notjmp   1 1       ; false\n[25] jump     -15\n=================================================================\n==15083== ERROR: AddressSanitizer: stack-buffer-overflow on address 0x7fff10f38da0 at pc 0x7f1e9a2afa33 bp 0x7f\nff10f365b0 sp 0x7fff10f365a8\nREAD of size 8 at 0x7fff10f38da0 thread T0\n    #0 0x7f1e9a2afa32 (/home/rurban/Perl/p2/p2/libpotion.so+0x1e5a32)\n    #1 0x41e4f8 (/home/rurban/Perl/p2/p2/potion+0x41e4f8)\n    #2 0x41c605 (/home/rurban/Perl/p2/p2/potion+0x41c605)\n    #3 0x7f1e994a6eac (/lib/x86_64-linux-gnu/libc-2.13.so+0x1eeac)\nAddress 0x7fff10f38da0 is located at offset 448 in frame \u003cpotion_vm\u003e of T0's stack:\n  This frame has 33 object(s):\n    [32, 40) 'P.addr'\n    [96, 104) 'proto.addr'\n    [160, 168) 'self.addr'\n    [224, 232) 'vargs.addr'\n    [288, 292) 'upc.addr'\n    [352, 360) 'upargs.addr'\n    [416, 424) 'f'\n    [480, 33248) 'stack'\n    [33280, 33288) 'val'\n    [33344, 33348) 'pos'\n    [33408, 33416) 'argx'\n    [33472, 33480) 'args'\n    [33536, 33544) 'upvals'\n    [33600, 33608) 'locals'\n```\n\nBetween f and stack, error confirmed with valgrind.\nThe cause seem to be unitialized registers.","files":null}]}